<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>사진 올리기</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous">
        <script src="http://code.jquery.com/jquery-3.7.1.js"></script>
    </head>
    <body>
        <div class="container">
            <h2>사진업로드</h2>
            <form id="uploadform">
                <div class="mb-3">
                    <label class="form-label">사진 제목</label>
                    <input class="form-control" id="이미지가져오기" type="file" accept="image/*">
                                                        <!--accept="image/*" : 파일 중에서 이미지만 올릴 수 있게 허용-->
                </div>
                <!--input에서 가져온 이미지를 img태그에서 보여주기-->
                <div class="mb-3">
                    <img id="이미지보이기" src="#" class="img-fluid d-none">
                                                               <!--d-none : (display-none) 엑스박스를 안보이게 만듦-->
                </div>
                <button type="submit" class="btn btn-primary">업로드</button>
            </form>
        </div>
        <script>
            $(document).ready(function() {
                $("#이미지보이기").change(function() {//input태그 바라보기
                                //change : 변경하기
                    const file = this.files[0];//이미지 보이기라는 input 태그(19번째 줄)에 가장 첫 번째로 올린 이미지를 보여줌
                                    //files : 파일의 경우에는 보통 다중 선택이 가능하기 때문에 files를 사용
                                    /*
                                    ★문제 발생
                                    const file = this.file[0];
                                    로 작성하면 에러가 발생함
                                    Cannot read properties of undefined (reading '0')
                                    ★문제 해결 방법
                                    const file = this.files[0];
                                    file 대신 files를 사용해야함
                                    ★원인
                                    file대신에 files를 사용해야 하는 이유
                                    <input type="file"> input 태그가 애초에 다중 파일 업로드를 지원하기 때문에
                                    지금처럼 1개의 파일만 업로드를 할 경우에는
                                    files[0] = 파일들 중에서 1번째로 선택된 파일만 보여주겠다고 표기
                                    */
                                         //0 : file에는 다양한 파일들이 존재할 수 있기 때문에 0으로 사용


                    //만약에 추가한 파일이 존재한다면
                    if (file) {
                        const 파일읽기 = new FileReader();
                        파일읽기.onload = function(e) {
                                                //e : event
                            $("#이미지보이기").attr('src', e.target.result).removeClass('d-none');
                                //이미지를 읽어온다면 d-none (display-none) 클래스를 제거하기
                        }
                        파일읽기.readAsDataURL(file);
                    } else {
                        $("#이미지보이기").addClass('d-none');//이미지가 사라진다면 d-none (display-none) 클래스를 추가하기
                    };
                });
            });


        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous">
        </script>
    </body>
</html>